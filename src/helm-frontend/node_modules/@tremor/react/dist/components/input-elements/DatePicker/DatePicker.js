'use client';
import{__rest as e}from"tslib";import r,{useMemo as t}from"react";import{border as a}from"../../../lib/shape.js";import{sizing as o}from"../../../lib/sizing.js";import{spacing as n}from"../../../lib/spacing.js";import{tremorTwMerge as l}from"../../../lib/tremorTwMerge.js";import{startOfToday as d,startOfMonth as s}from"date-fns";import{enUS as i}from"date-fns/locale";import m from"../../../hooks/useInternalState.js";import{formatSelectedDates as c}from"../DateRangePicker/dateRangePickerUtils.js";import u from"../../../assets/CalendarIcon.js";import f from"../../../assets/XCircleIcon.js";import{Popover as b}from"@headlessui/react";import{getSelectButtonColors as p,hasValue as g}from"../selectUtils.js";import k from"../Calendar/Calendar.js";import{makeDatePickerClassName as h}from"./datePickerUtils.js";const w=d(),v=r.forwardRef(((d,v)=>{var x;const{value:N,defaultValue:j,onValueChange:C,minDate:D,maxDate:E,placeholder:R="Select date",disabled:X=!1,locale:y=i,enableClear:S=!0,className:O,enableYearNavigation:P=!1,weekStartsOn:I=0}=d,V=e(d,["value","defaultValue","onValueChange","minDate","maxDate","placeholder","disabled","locale","enableClear","className","enableYearNavigation","weekStartsOn"]),[Y,M]=m(j,N),U=t((()=>{const e=[];return D&&e.push({before:D}),E&&e.push({after:E}),e}),[D,E]),z=Y?c(Y,void 0,y):R,B=s(null!==(x=null!=Y?Y:E)&&void 0!==x?x:w),L=S&&!X;return r.createElement(b,Object.assign({ref:v,as:"div",className:l("relative w-full min-w-[10rem] text-tremor-default","focus:ring-2 focus:ring-tremor-brand-muted focus:dark:focus:ring-dark-tremor-brand-muted",O)},V),r.createElement(b.Button,{disabled:X,className:l("w-full outline-none text-left whitespace-nowrap truncate focus:ring-2 transition duration-100 rounded-tremor-default flex flex-nowrap","border-tremor-border shadow-tremor-input text-tremor-content-emphasis focus:border-tremor-brand-subtle","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:text-dark-tremor-content-emphasis dark:focus:border-dark-tremor-brand-subtle",n.lg.paddingLeft,L?n.fourXl.paddingRight:n.twoXl.paddingRight,n.sm.paddingY,a.sm.all,p(g(Y),X))},r.createElement(u,{className:l(h("calendarIcon"),"flex-none shrink-0","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",o.lg.height,o.lg.width,n.threeXs.negativeMarginLeft,n.sm.marginRight),"aria-hidden":"true"}),r.createElement("p",{className:"truncate"},z)),L&&Y?r.createElement("button",{type:"button",className:l("absolute outline-none inset-y-0 right-0 flex items-center transition duration-100",n.twoXl.marginRight),onClick:e=>{e.preventDefault(),null==C||C(void 0),M(void 0)}},r.createElement(f,{className:l("flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",o.md.height,o.md.width)})):null,r.createElement(b.Panel,{className:l("absolute z-10 divide-y overflow-y-auto min-w-min left-0 outline-none rounded-tremor-default p-3","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown",n.twoXs.marginTop,n.twoXs.marginBottom,a.sm.all)},(({close:e})=>r.createElement(k,{showOutsideDays:!0,mode:"single",defaultMonth:B,selected:Y,weekStartsOn:I,onSelect:r=>{null==C||C(r),M(r),e()},locale:y,disabled:U,enableYearNavigation:P}))))}));v.displayName="DatePicker";export{v as default};
