'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("recharts"),l=require("../common/utils.cjs"),r=require("../common/NoData.cjs"),o=require("../common/ChartLegend.cjs"),i=require("./ScatterChartTooltip.cjs"),n=require("../../../lib/constants.cjs"),s=require("../../../lib/theme.cjs"),u=require("../../../lib/utils.cjs"),c=require("../../../lib/tremorTwMerge.cjs");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=d(t);const f=m.default.forwardRef(((d,f)=>{const{data:y=[],x:v,y:g,size:h,category:p,colors:x=s.themeColorRange,showOpacity:w=!1,sizeRange:k=[1,1e3],valueFormatter:C={x:u.defaultValueFormatter,y:u.defaultValueFormatter,size:u.defaultValueFormatter},startEndOnly:b=!1,showXAxis:E=!0,showYAxis:A=!0,yAxisWidth:V=56,animationDuration:D=900,showAnimation:T=!1,showTooltip:q=!0,showLegend:N=!0,showGridLines:j=!0,autoMinXValue:Y=!1,minXValue:L,maxXValue:O,autoMinYValue:F=!1,minYValue:M,maxYValue:S,allowDecimals:X=!0,onValueChange:z,noDataText:G,className:R}=d,$=e.__rest(d,["data","x","y","size","category","colors","showOpacity","sizeRange","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinXValue","minXValue","maxXValue","autoMinYValue","minYValue","maxYValue","allowDecimals","onValueChange","noDataText","className"]),[K,P]=t.useState(60),[W,B]=m.default.useState(void 0),[_,Z]=t.useState(void 0),H=!!z;function I(e,t,a){a.stopPropagation(),H&&(l.deepEqual(W,e.node)?(Z(void 0),B(void 0),null==z||z(null)):(B(e.node),Z(e.payload[p]),null==z||z(Object.assign({eventType:"bubble",categoryClicked:e.payload[p]},e.payload))))}const J=l.constructCategories(y,p),Q=l.constructCategoryColors(J,x),U=l.getYAxisDomain(Y,L,O),ee=l.getYAxisDomain(F,M,S);return m.default.createElement("div",Object.assign({ref:f,className:c.tremorTwMerge("w-full h-80",R)},$),m.default.createElement(a.ResponsiveContainer,{className:"h-full w-full"},(null==y?void 0:y.length)?m.default.createElement(a.ScatterChart,{onClick:H&&(_||W)?()=>{B(void 0),Z(void 0),null==z||z(null)}:void 0},j?m.default.createElement(a.CartesianGrid,{className:c.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!0}):null,v?m.default.createElement(a.XAxis,{hide:!E,dataKey:v,interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},ticks:b?[y[0][v],y[y.length-1][v]]:void 0,type:"number",name:v,fill:"",stroke:"",className:c.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,tickFormatter:C.x,axisLine:!1,padding:{left:0,right:0},minTickGap:5,domain:U,allowDataOverflow:!0}):null,g?m.default.createElement(a.YAxis,{width:V,hide:!A,axisLine:!1,tickLine:!1,dataKey:g,type:"number",name:g,domain:ee,tick:{transform:"translate(-3, 0)"},tickFormatter:C.y,fill:"",stroke:"",className:c.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),allowDecimals:X,allowDataOverflow:!0}):null,m.default.createElement(a.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:q?({active:e,payload:t,label:a})=>{var l,r;return m.default.createElement(i.default,{active:e,payload:t,label:p?null===(r=null===(l=null==t?void 0:t[0])||void 0===l?void 0:l.payload)||void 0===r?void 0:r[p]:a,valueFormatter:C,axis:{x:v,y:g,size:h},category:p,categoryColors:Q})}:m.default.createElement(m.default.Fragment,null)}),h?m.default.createElement(a.ZAxis,{dataKey:h,type:"number",range:k,name:h}):null,J.map((e=>{var t,r;return m.default.createElement(a.Scatter,{className:`\n                ${u.getColorClassNames(null!==(t=Q.get(e))&&void 0!==t?t:n.BaseColors.Gray,s.colorPalette.text).fillColor} \n                ${w?u.getColorClassNames(null!==(r=Q.get(e))&&void 0!==r?r:n.BaseColors.Gray,s.colorPalette.text).strokeColor:""}\n                ${z?"cursor-pointer":""}\n              `,fill:`url(#${Q.get(e)})`,fillOpacity:w?.7:1,key:e,name:e,data:p?y.filter((t=>t[p]===e)):y,isAnimationActive:T,animationDuration:D,shape:e=>((e,t,r)=>{const{cx:o,cy:i,width:n,node:s,fillOpacity:u,name:c}=e;return m.default.createElement(a.Dot,{cx:o,cy:i,r:n/2,opacity:t||r&&r!==c?l.deepEqual(t,s)?u:.3:u})})(e,W,_),onClick:I})})),N?m.default.createElement(a.Legend,{verticalAlign:"top",height:K,content:({payload:e})=>o({payload:e},Q,P,_,H?e=>{return t=e,void(H&&(t!==_||W?(Z(t),null==z||z({eventType:"category",categoryClicked:t})):(Z(void 0),null==z||z(null)),B(void 0)));var t}:void 0)}):null):m.default.createElement(r,{noDataText:G})))}));f.displayName="ScatterChart",module.exports=f;
