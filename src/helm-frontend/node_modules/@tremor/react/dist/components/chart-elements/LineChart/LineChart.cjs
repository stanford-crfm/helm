'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("recharts"),r=require("../common/utils.cjs"),o=require("../common/NoData.cjs"),l=require("../common/ChartLegend.cjs"),n=require("../common/ChartTooltip.cjs"),i=require("../../../lib/constants.cjs"),s=require("../../../lib/theme.cjs"),c=require("../../../lib/utils.cjs"),d=require("../../../lib/tremorTwMerge.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=u(t);const k=m.default.forwardRef(((u,k)=>{const{data:y=[],categories:p=[],index:g,colors:h=s.themeColorRange,valueFormatter:f=c.defaultValueFormatter,startEndOnly:v=!1,showXAxis:x=!0,showYAxis:w=!0,yAxisWidth:C=56,animationDuration:T=900,showAnimation:L=!1,showTooltip:b=!0,showLegend:N=!0,showGridLines:E=!0,autoMinValue:K=!1,curveType:j="linear",minValue:A,maxValue:D,connectNulls:O=!1,allowDecimals:V=!0,noDataText:q,className:M,onValueChange:F}=u,W=e.__rest(u,["data","categories","index","colors","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinValue","curveType","minValue","maxValue","connectNulls","allowDecimals","noDataText","className","onValueChange"]),[G,P]=t.useState(60),[S,Y]=t.useState(void 0),[B,R]=t.useState(void 0),X=r.constructCategoryColors(p,h),_=r.getYAxisDomain(K,A,D),z=!!F;function H(e){z&&(e===B&&!S||r.hasOnlyOneValueForThisKey(y,e)&&S&&S.dataKey===e?(R(void 0),null==F||F(null)):(R(e),null==F||F({eventType:"category",categoryClicked:e})),Y(void 0))}return m.default.createElement("div",Object.assign({ref:k,className:d.tremorTwMerge("w-full h-80",M)},W),m.default.createElement(a.ResponsiveContainer,{className:"h-full w-full"},(null==y?void 0:y.length)?m.default.createElement(a.LineChart,{data:y,onClick:z&&(B||S)?()=>{Y(void 0),R(void 0),null==F||F(null)}:void 0},E?m.default.createElement(a.CartesianGrid,{className:d.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!1}):null,m.default.createElement(a.XAxis,{hide:!x,dataKey:g,interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},ticks:v?[y[0][g],y[y.length-1][g]]:void 0,fill:"",stroke:"",className:d.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,padding:{left:10,right:10},minTickGap:5}),m.default.createElement(a.YAxis,{width:C,hide:!w,axisLine:!1,tickLine:!1,type:"number",domain:_,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:d.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:f,allowDecimals:V}),m.default.createElement(a.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:b?({active:e,payload:t,label:a})=>m.default.createElement(n.default,{active:e,payload:t,label:a,valueFormatter:f,categoryColors:X}):m.default.createElement(m.default.Fragment,null),position:{y:0}}),N?m.default.createElement(a.Legend,{verticalAlign:"top",height:G,content:({payload:e})=>l({payload:e},X,P,B,z?e=>H(e):void 0)}):null,p.map((e=>{var o;return m.default.createElement(a.Line,{className:d.tremorTwMerge(c.getColorClassNames(null!==(o=X.get(e))&&void 0!==o?o:i.BaseColors.Gray,s.colorPalette.text).strokeColor),strokeOpacity:S||B&&B!==e?.3:1,activeDot:e=>{var t;const{cx:o,cy:l,stroke:n,strokeLinecap:u,strokeLinejoin:k,strokeWidth:p,dataKey:g}=e;return m.default.createElement(a.Dot,{className:d.tremorTwMerge("stroke-tremor-background dark:stroke-dark-tremor-background",F?"cursor-pointer":"",c.getColorClassNames(null!==(t=X.get(g))&&void 0!==t?t:i.BaseColors.Gray,s.colorPalette.text).fillColor),cx:o,cy:l,r:5,fill:"",stroke:n,strokeLinecap:u,strokeLinejoin:k,strokeWidth:p,onClick:(t,a)=>function(e,t){t.stopPropagation(),z&&(e.index===(null==S?void 0:S.index)&&e.dataKey===(null==S?void 0:S.dataKey)||r.hasOnlyOneValueForThisKey(y,e.dataKey)&&B&&B===e.dataKey?(R(void 0),Y(void 0),null==F||F(null)):(R(e.dataKey),Y({index:e.index,dataKey:e.dataKey}),null==F||F(Object.assign({eventType:"dot",categoryClicked:e.dataKey},e.payload))))}(e,a)})},dot:o=>{var l;const{stroke:n,strokeLinecap:u,strokeLinejoin:k,strokeWidth:p,cx:g,cy:h,dataKey:f,index:v}=o;return r.hasOnlyOneValueForThisKey(y,e)&&!(S||B&&B!==e)||(null==S?void 0:S.index)===v&&(null==S?void 0:S.dataKey)===e?m.default.createElement(a.Dot,{key:v,cx:g,cy:h,r:5,stroke:n,fill:"",strokeLinecap:u,strokeLinejoin:k,strokeWidth:p,className:d.tremorTwMerge("stroke-tremor-background dark:stroke-dark-tremor-background",F?"cursor-pointer":"",c.getColorClassNames(null!==(l=X.get(f))&&void 0!==l?l:i.BaseColors.Gray,s.colorPalette.text).fillColor)}):m.default.createElement(t.Fragment,{key:v})},key:e,name:e,type:j,dataKey:e,stroke:"",strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",isAnimationActive:L,animationDuration:T,connectNulls:O})})),F?p.map((e=>m.default.createElement(a.Line,{className:d.tremorTwMerge("cursor-pointer"),strokeOpacity:0,key:e,name:e,type:j,dataKey:e,stroke:"transparent",fill:"transparent",legendType:"none",tooltipType:"none",strokeWidth:12,connectNulls:O,onClick:(e,t)=>{t.stopPropagation();const{name:a}=e;H(a)}}))):null):m.default.createElement(o,{noDataText:q})))}));k.displayName="LineChart",module.exports=k;
