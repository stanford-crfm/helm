'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("../../../lib/theme.cjs"),r=require("../../../lib/utils.cjs"),n=require("../../../lib/tremorTwMerge.cjs"),l=require("recharts"),o=require("../common/NoData.cjs"),i=require("./inputParser.cjs"),u=require("./DonutChartTooltip.cjs");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=s(t);const d=e=>{const{cx:t,cy:a,innerRadius:r,outerRadius:n,startAngle:o,endAngle:i,className:u}=e;return c.default.createElement("g",null,c.default.createElement(l.Sector,{cx:t,cy:a,innerRadius:r,outerRadius:n,startAngle:o,endAngle:i,className:u,fill:"",opacity:.3,style:{outline:"none"}}))},m=c.default.forwardRef(((s,m)=>{const{data:f=[],category:p="value",index:h="name",colors:g=a.themeColorRange,variant:v="donut",valueFormatter:y=r.defaultValueFormatter,label:b,showLabel:A=!0,animationDuration:w=900,showAnimation:x=!0,showTooltip:T=!0,noDataText:k,onValueChange:E,className:D}=s,j=e.__rest(s,["data","category","index","colors","variant","valueFormatter","label","showLabel","animationDuration","showAnimation","showTooltip","noDataText","onValueChange","className"]),q="donut"==v,C=i.parseLabelInput(b,y,f,p),[N,R]=c.default.useState(void 0),S=!!E;return t.useEffect((()=>{const e=document.querySelectorAll(".recharts-pie-sector");e&&e.forEach((e=>{e.setAttribute("style","outline: none")}))}),[N]),c.default.createElement("div",Object.assign({ref:m,className:n.tremorTwMerge("w-full h-44",D)},j),c.default.createElement(l.ResponsiveContainer,{className:"h-full w-full"},(null==f?void 0:f.length)?c.default.createElement(l.PieChart,{onClick:S&&N?()=>{R(void 0),null==E||E(null)}:void 0},A&&q?c.default.createElement("text",{className:n.tremorTwMerge("fill-tremor-content-emphasis","dark:fill-dark-tremor-content-emphasis"),x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle"},C):null,c.default.createElement(l.Pie,{className:n.tremorTwMerge("stroke-tremor-background dark:stroke-dark-tremor-background",E?"cursor-pointer":"cursor-default"),data:i.parseData(f,g),cx:"50%",cy:"50%",startAngle:90,endAngle:-270,innerRadius:q?"75%":"0%",outerRadius:"100%",stroke:"",strokeLinejoin:"round",dataKey:p,nameKey:h,isAnimationActive:x,animationDuration:w,onClick:function(e,t,a){a.stopPropagation(),S&&(N===t?(R(void 0),null==E||E(null)):(R(t),null==E||E(Object.assign({eventType:"slice"},e.payload.payload))))},activeIndex:N,inactiveShape:d,style:{outline:"none"}}),T?c.default.createElement(l.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,content:({active:e,payload:t})=>c.default.createElement(u.DonutChartTooltip,{active:e,payload:t,valueFormatter:y})}):null):c.default.createElement(o,{noDataText:k})))}));m.displayName="DonutChart",module.exports=m;
