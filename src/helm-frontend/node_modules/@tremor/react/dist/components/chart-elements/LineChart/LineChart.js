'use client';
import{__rest as e}from"tslib";import t,{useState as o,Fragment as a}from"react";import{ResponsiveContainer as r,LineChart as n,CartesianGrid as i,XAxis as l,YAxis as s,Tooltip as c,Legend as d,Line as m,Dot as k}from"recharts";import{constructCategoryColors as u,hasOnlyOneValueForThisKey as p,getYAxisDomain as y}from"../common/utils.js";import h from"../common/NoData.js";import v from"../common/ChartLegend.js";import f from"../common/ChartTooltip.js";import{BaseColors as g}from"../../../lib/constants.js";import{themeColorRange as x,colorPalette as w}from"../../../lib/theme.js";import{getColorClassNames as L,defaultValueFormatter as b}from"../../../lib/utils.js";import{tremorTwMerge as E}from"../../../lib/tremorTwMerge.js";const N=t.forwardRef(((N,j)=>{const{data:C=[],categories:K=[],index:T,colors:A=x,valueFormatter:D=b,startEndOnly:W=!1,showXAxis:V=!0,showYAxis:G=!0,yAxisWidth:O=56,animationDuration:F=900,showAnimation:M=!1,showTooltip:P=!0,showLegend:S=!0,showGridLines:X=!0,autoMinValue:Y=!1,curveType:z="linear",minValue:R,maxValue:q,connectNulls:B=!1,allowDecimals:H=!0,noDataText:I,className:J,onValueChange:Q}=N,U=e(N,["data","categories","index","colors","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinValue","curveType","minValue","maxValue","connectNulls","allowDecimals","noDataText","className","onValueChange"]),[Z,$]=o(60),[_,ee]=o(void 0),[te,oe]=o(void 0),ae=u(K,A),re=y(Y,R,q),ne=!!Q;function ie(e){ne&&(e===te&&!_||p(C,e)&&_&&_.dataKey===e?(oe(void 0),null==Q||Q(null)):(oe(e),null==Q||Q({eventType:"category",categoryClicked:e})),ee(void 0))}return t.createElement("div",Object.assign({ref:j,className:E("w-full h-80",J)},U),t.createElement(r,{className:"h-full w-full"},(null==C?void 0:C.length)?t.createElement(n,{data:C,onClick:ne&&(te||_)?()=>{ee(void 0),oe(void 0),null==Q||Q(null)}:void 0},X?t.createElement(i,{className:E("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!1}):null,t.createElement(l,{hide:!V,dataKey:T,interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},ticks:W?[C[0][T],C[C.length-1][T]]:void 0,fill:"",stroke:"",className:E("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,padding:{left:10,right:10},minTickGap:5}),t.createElement(s,{width:O,hide:!G,axisLine:!1,tickLine:!1,type:"number",domain:re,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:E("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:D,allowDecimals:H}),t.createElement(c,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:P?({active:e,payload:o,label:a})=>t.createElement(f,{active:e,payload:o,label:a,valueFormatter:D,categoryColors:ae}):t.createElement(t.Fragment,null),position:{y:0}}),S?t.createElement(d,{verticalAlign:"top",height:Z,content:({payload:e})=>v({payload:e},ae,$,te,ne?e=>ie(e):void 0)}):null,K.map((e=>{var o;return t.createElement(m,{className:E(L(null!==(o=ae.get(e))&&void 0!==o?o:g.Gray,w.text).strokeColor),strokeOpacity:_||te&&te!==e?.3:1,activeDot:e=>{var o;const{cx:a,cy:r,stroke:n,strokeLinecap:i,strokeLinejoin:l,strokeWidth:s,dataKey:c}=e;return t.createElement(k,{className:E("stroke-tremor-background dark:stroke-dark-tremor-background",Q?"cursor-pointer":"",L(null!==(o=ae.get(c))&&void 0!==o?o:g.Gray,w.text).fillColor),cx:a,cy:r,r:5,fill:"",stroke:n,strokeLinecap:i,strokeLinejoin:l,strokeWidth:s,onClick:(t,o)=>function(e,t){t.stopPropagation(),ne&&(e.index===(null==_?void 0:_.index)&&e.dataKey===(null==_?void 0:_.dataKey)||p(C,e.dataKey)&&te&&te===e.dataKey?(oe(void 0),ee(void 0),null==Q||Q(null)):(oe(e.dataKey),ee({index:e.index,dataKey:e.dataKey}),null==Q||Q(Object.assign({eventType:"dot",categoryClicked:e.dataKey},e.payload))))}(e,o)})},dot:o=>{var r;const{stroke:n,strokeLinecap:i,strokeLinejoin:l,strokeWidth:s,cx:c,cy:d,dataKey:m,index:u}=o;return p(C,e)&&!(_||te&&te!==e)||(null==_?void 0:_.index)===u&&(null==_?void 0:_.dataKey)===e?t.createElement(k,{key:u,cx:c,cy:d,r:5,stroke:n,fill:"",strokeLinecap:i,strokeLinejoin:l,strokeWidth:s,className:E("stroke-tremor-background dark:stroke-dark-tremor-background",Q?"cursor-pointer":"",L(null!==(r=ae.get(m))&&void 0!==r?r:g.Gray,w.text).fillColor)}):t.createElement(a,{key:u})},key:e,name:e,type:z,dataKey:e,stroke:"",strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",isAnimationActive:M,animationDuration:F,connectNulls:B})})),Q?K.map((e=>t.createElement(m,{className:E("cursor-pointer"),strokeOpacity:0,key:e,name:e,type:z,dataKey:e,stroke:"transparent",fill:"transparent",legendType:"none",tooltipType:"none",strokeWidth:12,connectNulls:B,onClick:(e,t)=>{t.stopPropagation();const{name:o}=e;ie(o)}}))):null):t.createElement(h,{noDataText:I})))}));N.displayName="LineChart";export{N as default};
