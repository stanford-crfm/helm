'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("../../../lib/constants.cjs"),r=require("../../../lib/theme.cjs"),l=require("../../../lib/utils.cjs"),o=require("../../../lib/tremorTwMerge.cjs"),i=require("recharts"),n=require("../common/utils.cjs"),s=require("../common/ChartLegend.cjs"),c=require("../common/ChartTooltip.cjs"),d=require("../common/NoData.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=u(t);const v=m.default.forwardRef(((u,v)=>{const{data:f=[],categories:g=[],index:h,colors:y=r.themeColorRange,valueFormatter:p=l.defaultValueFormatter,layout:k="horizontal",stack:w=!1,relative:x=!1,startEndOnly:b=!1,animationDuration:E=900,showAnimation:C=!1,showXAxis:A=!0,showYAxis:T=!0,yAxisWidth:j=56,showTooltip:L=!0,showLegend:q=!0,showGridLines:N=!0,autoMinValue:D=!1,minValue:O,maxValue:M,allowDecimals:V=!0,noDataText:F,onValueChange:S,className:G}=u,K=e.__rest(u,["data","categories","index","colors","valueFormatter","layout","stack","relative","startEndOnly","animationDuration","showAnimation","showXAxis","showYAxis","yAxisWidth","showTooltip","showLegend","showGridLines","autoMinValue","minValue","maxValue","allowDecimals","noDataText","onValueChange","className"]),[Y,B]=t.useState(60),P=n.constructCategoryColors(g,y),[X,z]=m.default.useState(void 0),[R,W]=t.useState(void 0),_=!!S;function I(e,t,a){var r,l;a.stopPropagation(),S&&(n.deepEqual(X,Object.assign(Object.assign({},e.payload),{value:e.value}))?(W(void 0),z(void 0),null==S||S(null)):(W(null===(r=e.tooltipPayload[0])||void 0===r?void 0:r.dataKey),z(Object.assign(Object.assign({},e.payload),{value:e.value})),null==S||S(Object.assign({eventType:"bar",categoryClicked:null===(l=e.tooltipPayload[0])||void 0===l?void 0:l.dataKey},e.payload))))}const $=n.getYAxisDomain(D,O,M);return m.default.createElement("div",Object.assign({ref:v,className:o.tremorTwMerge("w-full h-80",G)},K),m.default.createElement(i.ResponsiveContainer,{className:"h-full w-full"},(null==f?void 0:f.length)?m.default.createElement(i.BarChart,{data:f,stackOffset:x?"expand":"none",layout:"vertical"===k?"vertical":"horizontal",onClick:_&&(R||X)?()=>{z(void 0),W(void 0),null==S||S(null)}:void 0},N?m.default.createElement(i.CartesianGrid,{className:o.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:"vertical"!==k,vertical:"vertical"===k}):null,"vertical"!==k?m.default.createElement(i.XAxis,{hide:!A,dataKey:h,interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},ticks:b?[f[0][h],f[f.length-1][h]]:void 0,fill:"",stroke:"",className:o.tremorTwMerge("mt-4 text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1}):m.default.createElement(i.XAxis,{hide:!A,type:"number",tick:{transform:"translate(-3, 0)"},domain:$,fill:"",stroke:"",className:o.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,tickFormatter:p,padding:{left:10,right:10},minTickGap:5,allowDecimals:V}),"vertical"!==k?m.default.createElement(i.YAxis,{width:j,hide:!T,axisLine:!1,tickLine:!1,type:"number",domain:$,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:o.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:x?e=>`${(100*e).toString()} %`:p,allowDecimals:V}):m.default.createElement(i.YAxis,{width:j,hide:!T,dataKey:h,axisLine:!1,tickLine:!1,ticks:b?[f[0][h],f[f.length-1][h]]:void 0,type:"category",interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},fill:"",stroke:"",className:o.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content")}),m.default.createElement(i.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{fill:"#d1d5db",opacity:"0.15"},content:L?({active:e,payload:t,label:a})=>m.default.createElement(c.default,{active:e,payload:t,label:a,valueFormatter:p,categoryColors:P}):m.default.createElement(m.default.Fragment,null),position:{y:0}}),q?m.default.createElement(i.Legend,{verticalAlign:"top",height:Y,content:({payload:e})=>s({payload:e},P,B,R,_?e=>{return t=e,void(_&&(t!==R||X?(W(t),null==S||S({eventType:"category",categoryClicked:t})):(W(void 0),null==S||S(null)),z(void 0)));var t}:void 0)}):null,g.map((e=>{var t;return m.default.createElement(i.Bar,{className:o.tremorTwMerge(l.getColorClassNames(null!==(t=P.get(e))&&void 0!==t?t:a.BaseColors.Gray,r.colorPalette.background).fillColor,S?"cursor-pointer":""),key:e,name:e,type:"linear",stackId:w||x?"a":void 0,dataKey:e,fill:"",isAnimationActive:C,animationDuration:E,shape:e=>((e,t,a)=>{const{x:r,y:l,width:o,height:i,fillOpacity:s,name:c,payload:d,value:u}=e;return m.default.createElement("rect",{x:r,y:l,width:o,height:i,opacity:t||a&&a!==c?n.deepEqual(t,Object.assign(Object.assign({},d),{value:u}))?s:.3:s})})(e,X,R),onClick:I})}))):m.default.createElement(d,{noDataText:F})))}));v.displayName="BarChart",module.exports=v;
