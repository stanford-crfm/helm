'use client';
import{__rest as e}from"tslib";import t,{useEffect as a}from"react";import{themeColorRange as o}from"../../../lib/theme.js";import{defaultValueFormatter as n}from"../../../lib/utils.js";import{tremorTwMerge as r}from"../../../lib/tremorTwMerge.js";import{ResponsiveContainer as l,PieChart as i,Pie as s,Tooltip as m,Sector as c}from"recharts";import u from"../common/NoData.js";import{parseLabelInput as d,parseData as p}from"./inputParser.js";import{DonutChartTooltip as f}from"./DonutChartTooltip.js";const h=e=>{const{cx:a,cy:o,innerRadius:n,outerRadius:r,startAngle:l,endAngle:i,className:s}=e;return t.createElement("g",null,t.createElement(c,{cx:a,cy:o,innerRadius:n,outerRadius:r,startAngle:l,endAngle:i,className:s,fill:"",opacity:.3,style:{outline:"none"}}))},y=t.forwardRef(((c,y)=>{const{data:v=[],category:g="value",index:A="name",colors:b=o,variant:x="donut",valueFormatter:k=n,label:w,showLabel:E=!0,animationDuration:N=900,showAnimation:j=!0,showTooltip:D=!0,noDataText:T,onValueChange:R,className:C}=c,S=e(c,["data","category","index","colors","variant","valueFormatter","label","showLabel","animationDuration","showAnimation","showTooltip","noDataText","onValueChange","className"]),F="donut"==x,L=d(w,k,v,g),[K,O]=t.useState(void 0),P=!!R;return a((()=>{const e=document.querySelectorAll(".recharts-pie-sector");e&&e.forEach((e=>{e.setAttribute("style","outline: none")}))}),[K]),t.createElement("div",Object.assign({ref:y,className:r("w-full h-44",C)},S),t.createElement(l,{className:"h-full w-full"},(null==v?void 0:v.length)?t.createElement(i,{onClick:P&&K?()=>{O(void 0),null==R||R(null)}:void 0},E&&F?t.createElement("text",{className:r("fill-tremor-content-emphasis","dark:fill-dark-tremor-content-emphasis"),x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle"},L):null,t.createElement(s,{className:r("stroke-tremor-background dark:stroke-dark-tremor-background",R?"cursor-pointer":"cursor-default"),data:p(v,b),cx:"50%",cy:"50%",startAngle:90,endAngle:-270,innerRadius:F?"75%":"0%",outerRadius:"100%",stroke:"",strokeLinejoin:"round",dataKey:g,nameKey:A,isAnimationActive:j,animationDuration:N,onClick:function(e,t,a){a.stopPropagation(),P&&(K===t?(O(void 0),null==R||R(null)):(O(t),null==R||R(Object.assign({eventType:"slice"},e.payload.payload))))},activeIndex:K,inactiveShape:h,style:{outline:"none"}}),D?t.createElement(m,{wrapperStyle:{outline:"none"},isAnimationActive:!1,content:({active:e,payload:a})=>t.createElement(f,{active:e,payload:a,valueFormatter:k})}):null):t.createElement(u,{noDataText:T})))}));y.displayName="DonutChart";export{y as default};
