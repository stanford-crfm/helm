'use client';
import{__rest as e}from"tslib";import t,{useState as a}from"react";import{ResponsiveContainer as o,ScatterChart as l,CartesianGrid as r,XAxis as i,YAxis as n,Tooltip as s,ZAxis as m,Scatter as c,Legend as d,Dot as u}from"recharts";import{constructCategories as p,constructCategoryColors as y,deepEqual as v,getYAxisDomain as h}from"../common/utils.js";import f from"../common/NoData.js";import g from"../common/ChartLegend.js";import w from"./ScatterChartTooltip.js";import{BaseColors as x}from"../../../lib/constants.js";import{themeColorRange as k,colorPalette as b}from"../../../lib/theme.js";import{getColorClassNames as E,defaultValueFormatter as V}from"../../../lib/utils.js";import{tremorTwMerge as A}from"../../../lib/tremorTwMerge.js";const C=t.forwardRef(((C,D)=>{const{data:j=[],x:N,y:O,size:T,category:L,colors:X=k,showOpacity:Y=!1,sizeRange:z=[1,1e3],valueFormatter:F={x:V,y:V,size:V},startEndOnly:S=!1,showXAxis:G=!0,showYAxis:M=!0,yAxisWidth:$=56,animationDuration:K=900,showAnimation:R=!1,showTooltip:W=!0,showLegend:P=!0,showGridLines:q=!0,autoMinXValue:B=!1,minXValue:H,maxXValue:I,autoMinYValue:J=!1,minYValue:Q,maxYValue:U,allowDecimals:Z=!0,onValueChange:_,noDataText:ee,className:te}=C,ae=e(C,["data","x","y","size","category","colors","showOpacity","sizeRange","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinXValue","minXValue","maxXValue","autoMinYValue","minYValue","maxYValue","allowDecimals","onValueChange","noDataText","className"]),[oe,le]=a(60),[re,ie]=t.useState(void 0),[ne,se]=a(void 0),me=!!_;function ce(e,t,a){a.stopPropagation(),me&&(v(re,e.node)?(se(void 0),ie(void 0),null==_||_(null)):(ie(e.node),se(e.payload[L]),null==_||_(Object.assign({eventType:"bubble",categoryClicked:e.payload[L]},e.payload))))}const de=p(j,L),ue=y(de,X),pe=h(B,H,I),ye=h(J,Q,U);return t.createElement("div",Object.assign({ref:D,className:A("w-full h-80",te)},ae),t.createElement(o,{className:"h-full w-full"},(null==j?void 0:j.length)?t.createElement(l,{onClick:me&&(ne||re)?()=>{ie(void 0),se(void 0),null==_||_(null)}:void 0},q?t.createElement(r,{className:A("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!0}):null,N?t.createElement(i,{hide:!G,dataKey:N,interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},ticks:S?[j[0][N],j[j.length-1][N]]:void 0,type:"number",name:N,fill:"",stroke:"",className:A("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,tickFormatter:F.x,axisLine:!1,padding:{left:0,right:0},minTickGap:5,domain:pe,allowDataOverflow:!0}):null,O?t.createElement(n,{width:$,hide:!M,axisLine:!1,tickLine:!1,dataKey:O,type:"number",name:O,domain:ye,tick:{transform:"translate(-3, 0)"},tickFormatter:F.y,fill:"",stroke:"",className:A("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),allowDecimals:Z,allowDataOverflow:!0}):null,t.createElement(s,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:W?({active:e,payload:a,label:o})=>{var l,r;return t.createElement(w,{active:e,payload:a,label:L?null===(r=null===(l=null==a?void 0:a[0])||void 0===l?void 0:l.payload)||void 0===r?void 0:r[L]:o,valueFormatter:F,axis:{x:N,y:O,size:T},category:L,categoryColors:ue})}:t.createElement(t.Fragment,null)}),T?t.createElement(m,{dataKey:T,type:"number",range:z,name:T}):null,de.map((e=>{var a,o;return t.createElement(c,{className:`\n                ${E(null!==(a=ue.get(e))&&void 0!==a?a:x.Gray,b.text).fillColor} \n                ${Y?E(null!==(o=ue.get(e))&&void 0!==o?o:x.Gray,b.text).strokeColor:""}\n                ${_?"cursor-pointer":""}\n              `,fill:`url(#${ue.get(e)})`,fillOpacity:Y?.7:1,key:e,name:e,data:L?j.filter((t=>t[L]===e)):j,isAnimationActive:R,animationDuration:K,shape:e=>((e,a,o)=>{const{cx:l,cy:r,width:i,node:n,fillOpacity:s,name:m}=e;return t.createElement(u,{cx:l,cy:r,r:i/2,opacity:a||o&&o!==m?v(a,n)?s:.3:s})})(e,re,ne),onClick:ce})})),P?t.createElement(d,{verticalAlign:"top",height:oe,content:({payload:e})=>g({payload:e},ue,le,ne,me?e=>{return t=e,void(me&&(t!==ne||re?(se(t),null==_||_({eventType:"category",categoryClicked:t})):(se(void 0),null==_||_(null)),ie(void 0)));var t}:void 0)}):null):t.createElement(f,{noDataText:ee})))}));C.displayName="ScatterChart";export{C as default};
