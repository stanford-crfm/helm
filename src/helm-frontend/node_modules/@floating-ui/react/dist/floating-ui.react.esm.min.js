import*as e from"react";import{useLayoutEffect as t,useEffect as n,useRef as r}from"react";import{hideOthers as o}from"aria-hidden";import{tabbable as u}from"tabbable";import{createPortal as c,flushSync as i}from"react-dom";import{getOverflowAncestors as l,offset as s,detectOverflow as a,useFloating as f}from"@floating-ui/react-dom";export{arrow,autoPlacement,autoUpdate,computePosition,detectOverflow,flip,getOverflowAncestors,hide,inline,limitShift,offset,platform,shift,size}from"@floating-ui/react-dom";var d="undefined"!=typeof document?t:n;let m=!1,v=0;const p=()=>"floating-ui-"+v++;const g=e["useId".toString()]||function(){const[t,n]=e.useState((()=>m?p():void 0));return d((()=>{null==t&&n(p())}),[]),e.useEffect((()=>{m||(m=!0)}),[]),t};function b(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter((e=>e!==n)))}}}const h=e.createContext(null),y=e.createContext(null),w=()=>{var t;return(null==(t=e.useContext(h))?void 0:t.id)||null},E=()=>e.useContext(y),R=e=>{const t=g(),n=E(),r=w(),o=e||r;return d((()=>{const e={id:t,parentId:o};return null==n||n.addNode(e),()=>{null==n||n.removeNode(e)}}),[n,t,o]),t},x=t=>{let{children:n,id:r}=t;const o=w();return e.createElement(h.Provider,{value:e.useMemo((()=>({id:r,parentId:o})),[r,o])},n)},I=t=>{let{children:n}=t;const r=e.useRef([]),o=e.useCallback((e=>{r.current=[...r.current,e]}),[]),u=e.useCallback((e=>{r.current=r.current.filter((t=>t!==e))}),[]),c=e.useState((()=>b()))[0];return e.createElement(y.Provider,{value:e.useMemo((()=>({nodesRef:r,addNode:o,removeNode:u,events:c})),[r,o,u,c])},n)};function k(e){return(null==e?void 0:e.ownerDocument)||document}function T(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function C(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function M(e){return k(e).defaultView||window}function A(e){return!!e&&e instanceof M(e).Element}function L(e){return!!e&&e instanceof M(e).HTMLElement}function O(e){if(0===e.mozInputSource&&e.isTrusted)return!0;const t=/Android/i;return(t.test(T())||t.test(C()))&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType}function P(e){return 0===e.width&&0===e.height||1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"!==e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail}function S(){return/apple/i.test(navigator.vendor)}function D(){return T().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function F(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function K(e){const t=r(e);return d((()=>{t.current=e})),t}function H(e,t,n){return n&&!F(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}const N=function(t,n){let{enabled:r=!0,delay:o=0,handleClose:u=null,mouseOnly:c=!1,restMs:i=0,move:l=!0}=void 0===n?{}:n;const{open:s,onOpenChange:a,dataRef:f,events:m,elements:{domReference:v,floating:p},refs:g}=t,b=E(),h=w(),y=K(u),R=K(o),x=e.useRef(),I=e.useRef(),T=e.useRef(),C=e.useRef(),M=e.useRef(!0),L=e.useRef(!1),O=e.useRef((()=>{})),P=e.useCallback((()=>{var e;const t=null==(e=f.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[f]);e.useEffect((()=>{if(r)return m.on("dismiss",e),()=>{m.off("dismiss",e)};function e(){clearTimeout(I.current),clearTimeout(C.current),M.current=!0}}),[r,m]),e.useEffect((()=>{if(!r||!y.current||!s)return;function e(){P()&&a(!1)}const t=k(p).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[p,s,a,r,y,f,P]);const S=e.useCallback((function(e){void 0===e&&(e=!0);const t=H(R.current,"close",x.current);t&&!T.current?(clearTimeout(I.current),I.current=setTimeout((()=>a(!1)),t)):e&&(clearTimeout(I.current),a(!1))}),[R,a]),D=e.useCallback((()=>{O.current(),T.current=void 0}),[]),N=e.useCallback((()=>{if(L.current){const e=k(g.floating.current).body;e.style.pointerEvents="",e.removeAttribute("data-floating-ui-safe-polygon"),L.current=!1}}),[g]);return e.useEffect((()=>{if(r&&A(v)){const e=v;return s&&e.addEventListener("mouseleave",u),null==p||p.addEventListener("mouseleave",u),l&&e.addEventListener("mousemove",n,{once:!0}),e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",o),()=>{s&&e.removeEventListener("mouseleave",u),null==p||p.removeEventListener("mouseleave",u),l&&e.removeEventListener("mousemove",n),e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",o)}}function e(){return!!f.current.openEvent&&["click","mousedown"].includes(f.current.openEvent.type)}function n(e){if(clearTimeout(I.current),M.current=!1,c&&!F(x.current)||i>0&&0===H(R.current,"open"))return;f.current.openEvent=e;const t=H(R.current,"open",x.current);t?I.current=setTimeout((()=>{a(!0)}),t):a(!0)}function o(n){if(e())return;O.current();const r=k(p);if(clearTimeout(C.current),y.current){s||clearTimeout(I.current),T.current=y.current({...t,tree:b,x:n.clientX,y:n.clientY,onClose(){N(),D(),S()}});const e=T.current;return r.addEventListener("mousemove",e),void(O.current=()=>{r.removeEventListener("mousemove",e)})}S()}function u(n){e()||null==y.current||y.current({...t,tree:b,x:n.clientX,y:n.clientY,onClose(){N(),D(),S()}})(n)}}),[v,p,r,t,c,i,l,S,D,N,a,s,b,R,y,f]),d((()=>{var e;if(r&&s&&null!=(e=y.current)&&e.__options.blockPointerEvents&&P()){const e=k(p).body;if(e.setAttribute("data-floating-ui-safe-polygon",""),e.style.pointerEvents="none",L.current=!0,A(v)&&p){var t,n;const e=v,r=null==b||null==(t=b.nodesRef.current.find((e=>e.id===h)))||null==(n=t.context)?void 0:n.elements.floating;return r&&(r.style.pointerEvents=""),e.style.pointerEvents="auto",p.style.pointerEvents="auto",()=>{e.style.pointerEvents="",p.style.pointerEvents=""}}}}),[r,s,h,p,v,b,y,f,P]),d((()=>{s||(x.current=void 0,D(),N())}),[s,D,N]),e.useEffect((()=>()=>{D(),clearTimeout(I.current),clearTimeout(C.current),N()}),[r,D,N]),e.useMemo((()=>{if(!r)return{};function e(e){x.current=e.pointerType}return{reference:{onPointerDown:e,onPointerEnter:e,onMouseMove(){s||0===i||(clearTimeout(C.current),C.current=setTimeout((()=>{M.current||a(!0)}),i))}},floating:{onMouseEnter(){clearTimeout(I.current)},onMouseLeave(){m.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),S(!1)}}}}),[m,r,i,s,a,S])},B=e.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{},isInstantPhase:!1}),_=()=>e.useContext(B),j=t=>{let{children:n,delay:r,timeoutMs:o=0}=t;const[u,c]=e.useReducer(((e,t)=>({...e,...t})),{delay:r,timeoutMs:o,initialDelay:r,currentId:null,isInstantPhase:!1}),i=e.useRef(null),l=e.useCallback((e=>{c({currentId:e})}),[]);return d((()=>{u.currentId?null===i.current?i.current=u.currentId:c({isInstantPhase:!0}):(c({isInstantPhase:!1}),i.current=null)}),[u.currentId]),e.createElement(B.Provider,{value:e.useMemo((()=>({...u,setState:c,setCurrentId:l})),[u,c,l])},n)},V=(t,n)=>{let{open:r,onOpenChange:o}=t,{id:u}=n;const{currentId:c,setCurrentId:i,initialDelay:l,setState:s,timeoutMs:a}=_();e.useEffect((()=>{c&&(s({delay:{open:1,close:H(l,"close")}}),c!==u&&o(!1))}),[u,o,s,c,l]),e.useEffect((()=>{function e(){o(!1),s({delay:l,currentId:null})}if(!r&&c===u){if(a){const t=window.setTimeout(e,a);return()=>{clearTimeout(t)}}e()}}),[r,s,c,u,o,l,a]),e.useEffect((()=>{r&&i(u)}),[r,i,u])};function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function q(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(r=n.shadowRoot)?void 0:r.activeElement);){var n,r;t=t.shadowRoot.activeElement}return t}function z(e,t){if(!e||!t)return!1;const n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&(r=n,"undefined"!=typeof ShadowRoot&&(r instanceof M(r).ShadowRoot||r instanceof ShadowRoot))){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}var r;return!1}let U=0;function X(e,t){void 0===t&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(U);const u=()=>null==e?void 0:e.focus({preventScroll:n});o?u():U=requestAnimationFrame(u)}function Y(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}))||[],r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))}))||[],n=n.concat(r);return n}function Z(e){return"composedPath"in e?e.composedPath()[0]:e.target}function G(e){return L(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}function J(e){e.preventDefault(),e.stopPropagation()}const Q=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function $(e,t){const n=u(e,Q());"prev"===t&&n.reverse();const r=n.indexOf(q(k(e)));return n.slice(r+1)[0]}function ee(){return $(document.body,"next")}function te(){return $(document.body,"prev")}function ne(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!z(n,r)}function re(e){u(e,Q()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function oe(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const ue=e["useInsertionEffect".toString()]||(e=>e());function ce(t){const n=e.useRef((()=>{}));return ue((()=>{n.current=t})),e.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)}),[])}const ie={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let le,se;function ae(e){"Tab"===e.key&&(le=e.target,clearTimeout(se))}const fe=e.forwardRef((function(t,n){const r=ce(t.onFocus),[o,u]=e.useState();return d((()=>(S()&&u("button"),document.addEventListener("keydown",ae),()=>{document.removeEventListener("keydown",ae)})),[]),e.createElement("span",W({},t,{ref:n,tabIndex:0,role:o,"aria-hidden":!o||void 0,"data-floating-ui-focus-guard":"",style:ie,onFocus:e=>{S()&&D()&&!function(e){const t=le===e.relatedTarget;return le=e.relatedTarget,clearTimeout(se),t}(e)?(e.persist(),se=window.setTimeout((()=>{r(e)}),50)):r(e)}}))})),de=e.createContext(null),me=function(t){let{id:n,enabled:r=!0}=void 0===t?{}:t;const[o,u]=e.useState(null),c=g(),i=pe();return d((()=>{if(!r)return;const e=n?document.getElementById(n):null;if(!e){const e=document.createElement("div");""!==n&&(e.id=n||c),e.setAttribute("data-floating-ui-portal",""),u(e);const t=(null==i?void 0:i.portalNode)||document.body;return t.appendChild(e),()=>{t.removeChild(e)}}e.setAttribute("data-floating-ui-portal",""),u(e)}),[n,i,c,r]),o},ve=t=>{let{children:n,id:r,root:o=null,preserveTabOrder:u=!0}=t;const i=me({id:r,enabled:!o}),[l,s]=e.useState(null),a=e.useRef(null),f=e.useRef(null),d=e.useRef(null),m=e.useRef(null),v=!!l&&!l.modal&&!(!o&&!i)&&u;return e.useEffect((()=>{if(i&&u&&(null==l||!l.modal))return i.addEventListener("focusin",e,!0),i.addEventListener("focusout",e,!0),()=>{i.removeEventListener("focusin",e,!0),i.removeEventListener("focusout",e,!0)};function e(e){if(i&&ne(e)){("focusin"===e.type?oe:re)(i)}}}),[i,u,null==l?void 0:l.modal]),e.createElement(de.Provider,{value:e.useMemo((()=>({preserveTabOrder:u,beforeOutsideRef:a,afterOutsideRef:f,beforeInsideRef:d,afterInsideRef:m,portalNode:i,setFocusManagerState:s})),[u,i])},v&&i&&e.createElement(fe,{"data-type":"outside",ref:a,onFocus:e=>{if(ne(e,i)){var t;null==(t=d.current)||t.focus()}else{const e=te()||(null==l?void 0:l.refs.domReference.current);null==e||e.focus()}}}),v&&i&&e.createElement("span",{"aria-owns":i.id,style:ie}),o?c(n,o):i?c(n,i):null,v&&i&&e.createElement(fe,{"data-type":"outside",ref:f,onFocus:e=>{if(ne(e,i)){var t;null==(t=m.current)||t.focus()}else{const e=ee()||(null==l?void 0:l.refs.domReference.current);null==e||e.focus(),(null==l?void 0:l.closeOnFocusOut)&&(null==l||l.onOpenChange(!1))}}}))},pe=()=>e.useContext(de),ge=e.forwardRef((function(t,n){return e.createElement("button",W({},t,{type:"button",ref:n,tabIndex:-1,style:ie}))}));function be(t){let{context:n,children:r,order:c=["content"],guards:i=!0,initialFocus:l=0,returnFocus:s=!0,modal:a=!0,visuallyHiddenDismiss:f=!1,closeOnFocusOut:m=!0}=t;const{refs:v,nodeId:p,onOpenChange:g,events:b,dataRef:h,elements:{domReference:y,floating:w}}=n,R=K(c),x=E(),I=pe(),[T,C]=e.useState(null),M="number"==typeof l&&l<0,A=e.useRef(null),O=e.useRef(null),P=e.useRef(!1),S=e.useRef(null),D=e.useRef(!1),F=null!=I,H=y&&"combobox"===y.getAttribute("role")&&G(y),N=e.useCallback((function(e){return void 0===e&&(e=w),e?u(e,Q()):[]}),[w]),B=e.useCallback((e=>{const t=N(e);return R.current.map((e=>y&&"reference"===e?y:w&&"floating"===e?w:t)).filter(Boolean).flat()}),[y,w,R,N]);e.useEffect((()=>{if(!a)return;function e(e){if("Tab"===e.key){0!==N().length||H||J(e);const t=B(),n=Z(e);"reference"===R.current[0]&&n===y&&(J(e),e.shiftKey?X(t[t.length-1]):X(t[1])),"floating"===R.current[1]&&n===w&&e.shiftKey&&(J(e),X(t[0]))}}const t=k(w);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[y,w,a,R,v,H,N,B]),e.useEffect((()=>{if(m)return w&&L(y)?(y.addEventListener("focusout",t),y.addEventListener("pointerdown",e),!a&&w.addEventListener("focusout",t),()=>{y.removeEventListener("focusout",t),y.removeEventListener("pointerdown",e),!a&&w.removeEventListener("focusout",t)}):void 0;function e(){D.current=!0,setTimeout((()=>{D.current=!1}))}function t(e){const t=e.relatedTarget,n=!(z(y,t)||z(w,t)||z(t,w)||z(null==I?void 0:I.portalNode,t)||null!=t&&t.hasAttribute("data-floating-ui-focus-guard")||x&&(Y(x.nodesRef.current,p).find((e=>{var n,r;return z(null==(n=e.context)?void 0:n.elements.floating,t)||z(null==(r=e.context)?void 0:r.elements.domReference,t)}))||function(e,t){var n;let r=[],o=null==(n=e.find((e=>e.id===t)))?void 0:n.parentId;for(;o;){const t=e.find((e=>e.id===o));o=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}(x.nodesRef.current,p).find((e=>{var n,r;return(null==(n=e.context)?void 0:n.elements.floating)===t||(null==(r=e.context)?void 0:r.elements.domReference)===t}))));t&&n&&!D.current&&t!==S.current&&(P.current=!0,setTimeout((()=>g(!1))))}}),[y,w,a,p,x,I,g,m]),e.useEffect((()=>{var e;const t=Array.from((null==I||null==(e=I.portalNode)?void 0:e.querySelectorAll("[data-floating-ui-portal]"))||[]);if(w&&a){const e=[w,...t,...[A.current,O.current].filter(Boolean)],n=o(R.current.includes("reference")||H?e.concat(y||[]):e);return()=>{n()}}}),[y,w,a,R,I,H]),e.useEffect((()=>{if(a&&!i&&w){const e=[],t=Q(),n=u(k(w).body,t),r=B(),o=n.filter((e=>!r.includes(e)));return o.forEach(((t,n)=>{e[n]=t.getAttribute("tabindex"),t.setAttribute("tabindex","-1")})),()=>{o.forEach(((t,n)=>{const r=e[n];null==r?t.removeAttribute("tabindex"):t.setAttribute("tabindex",r)}))}}}),[w,a,i,B]),d((()=>{if(!w)return;const e=k(w);let t=s,n=!1;const r=q(e),o=h.current;S.current=r;const u=B(w),c=("number"==typeof l?u[l]:l.current)||w;function i(e){if("escapeKey"===e.type&&v.domReference.current&&(S.current=v.domReference.current),["referencePress","escapeKey"].includes(e.type))return;const r=e.data.returnFocus;"object"==typeof r?(t=!0,n=r.preventScroll):t=r}return!M&&X(c,{preventScroll:c===w}),b.on("dismiss",i),()=>{var r;(b.off("dismiss",i),z(w,q(e))&&v.domReference.current&&(S.current=v.domReference.current),t&&L(S.current)&&!P.current)&&(!v.domReference.current||D.current?X(S.current,{cancelPrevious:!1,preventScroll:n}):(o.__syncReturnFocus=!0,null==(r=S.current)||r.focus({preventScroll:n}),setTimeout((()=>{delete o.__syncReturnFocus}))))}}),[w,B,l,s,h,v,b,M]),d((()=>{if(I)return I.setFocusManagerState({...n,modal:a,closeOnFocusOut:m}),()=>{I.setFocusManagerState(null)}}),[I,a,m,n]),d((()=>{if(!M&&w&&(e(),"function"==typeof MutationObserver)){const t=new MutationObserver(e);return t.observe(w,{childList:!0,subtree:!0}),()=>{t.disconnect()}}function e(){C(N().length)}}),[w,N,M,v]);const _=i&&(F||a)&&!H;function j(t){return f&&a?e.createElement(ge,{ref:"start"===t?A:O,onClick:()=>g(!1)},"string"==typeof f?f:"Dismiss"):null}return e.createElement(e.Fragment,null,_&&e.createElement(fe,{"data-type":"inside",ref:null==I?void 0:I.beforeInsideRef,onFocus:e=>{if(a){const e=B();X("reference"===c[0]?e[0]:e[e.length-1])}else if(null!=I&&I.preserveTabOrder&&I.portalNode)if(P.current=!1,ne(e,I.portalNode)){const e=ee()||y;null==e||e.focus()}else{var t;null==(t=I.beforeOutsideRef.current)||t.focus()}}}),H?null:j("start"),e.cloneElement(r,0===T||c.includes("floating")?{tabIndex:0}:{}),j("end"),_&&e.createElement(fe,{"data-type":"inside",ref:null==I?void 0:I.afterInsideRef,onFocus:e=>{if(a)X(B()[0]);else if(null!=I&&I.preserveTabOrder&&I.portalNode)if(P.current=!0,ne(e,I.portalNode)){const e=te()||y;null==e||e.focus()}else{var t;null==(t=I.afterOutsideRef.current)||t.focus()}}}))}const he="data-floating-ui-scroll-lock",ye=e.forwardRef((function(t,n){let{lockScroll:r=!1,...o}=t;return d((()=>{var e,t;if(!r)return;if(document.body.hasAttribute(he))return;document.body.setAttribute(he,"");const n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth;if(!/iP(hone|ad|od)|iOS/.test(T()))return Object.assign(document.body.style,{overflow:"hidden",[n]:o+"px"}),()=>{document.body.removeAttribute(he),Object.assign(document.body.style,{overflow:"",[n]:""})};const u=(null==(e=window.visualViewport)?void 0:e.offsetLeft)||0,c=(null==(t=window.visualViewport)?void 0:t.offsetTop)||0,i=window.pageXOffset,l=window.pageYOffset;return Object.assign(document.body.style,{position:"fixed",overflow:"hidden",top:-(l-Math.floor(c))+"px",left:-(i-Math.floor(u))+"px",right:"0",[n]:o+"px"}),()=>{Object.assign(document.body.style,{position:"",overflow:"",top:"",left:"",right:"",[n]:""}),document.body.removeAttribute(he),window.scrollTo(i,l)}}),[r]),e.createElement("div",W({ref:n},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))}));function we(e){return L(e.target)&&"BUTTON"===e.target.tagName}function Ee(e){return G(e)}const Re=function(t,n){let{open:r,onOpenChange:o,dataRef:u,elements:{domReference:c}}=t,{enabled:i=!0,event:l="click",toggle:s=!0,ignoreMouse:a=!1,keyboardHandlers:f=!0}=void 0===n?{}:n;const d=e.useRef();return e.useMemo((()=>i?{reference:{onPointerDown(e){d.current=e.pointerType},onMouseDown(e){0===e.button&&(F(d.current,!0)&&a||"click"!==l&&(r?!s||u.current.openEvent&&"mousedown"!==u.current.openEvent.type||o(!1):(e.preventDefault(),o(!0)),u.current.openEvent=e.nativeEvent))},onClick(e){u.current.__syncReturnFocus||("mousedown"===l&&d.current?d.current=void 0:F(d.current,!0)&&a||(r?!s||u.current.openEvent&&"click"!==u.current.openEvent.type||o(!1):o(!0),u.current.openEvent=e.nativeEvent))},onKeyDown(e){d.current=void 0,f&&(we(e)||(" "!==e.key||Ee(c)||e.preventDefault(),"Enter"===e.key&&(r?s&&o(!1):o(!0))))},onKeyUp(e){f&&(we(e)||Ee(c)||" "===e.key&&(r?s&&o(!1):o(!0)))}}}:{}),[i,u,l,a,f,c,s,r,o])};function xe(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}const Ie={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},ke={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Te=function(t,n){let{open:r,onOpenChange:o,events:u,nodeId:c,elements:{reference:i,domReference:s,floating:a},dataRef:f}=t,{enabled:d=!0,escapeKey:m=!0,outsidePress:v=!0,outsidePressEvent:p="pointerdown",referencePress:g=!1,referencePressEvent:b="pointerdown",ancestorScroll:h=!1,bubbles:y=!0}=void 0===n?{}:n;const R=E(),x=null!=w(),I=ce("function"==typeof v?v:()=>!1),T="function"==typeof v?I:v,C=e.useRef(!1),{escapeKeyBubbles:M,outsidePressBubbles:S}=function(e){var t,n;return void 0===e&&(e=!0),{escapeKeyBubbles:"boolean"==typeof e?e:null==(t=e.escapeKey)||t,outsidePressBubbles:"boolean"==typeof e?e:null==(n=e.outsidePress)||n}}(y);return e.useEffect((()=>{if(!r||!d)return;function e(e){if("Escape"===e.key){const e=R?Y(R.nodesRef.current,c):[];if(e.length>0){let t=!0;if(e.forEach((e=>{var n;null==(n=e.context)||!n.open||e.context.dataRef.current.__escapeKeyBubbles||(t=!1)})),!t)return}u.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),o(!1)}}function t(e){const t=C.current;if(C.current=!1,t)return;if("function"==typeof T&&!T(e))return;const n=Z(e);if(L(n)&&a){const t=a.ownerDocument.defaultView||window,r=n.scrollWidth>n.clientWidth,o=n.scrollHeight>n.clientHeight;let u=o&&e.offsetX>n.clientWidth;if(o){"rtl"===t.getComputedStyle(n).direction&&(u=e.offsetX<=n.offsetWidth-n.clientWidth)}if(u||r&&e.offsetY>n.clientHeight)return}const r=R&&Y(R.nodesRef.current,c).some((t=>{var n;return xe(e,null==(n=t.context)?void 0:n.elements.floating)}));if(xe(e,a)||xe(e,s)||r)return;const i=R?Y(R.nodesRef.current,c):[];if(i.length>0){let e=!0;if(i.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}u.emit("dismiss",{type:"outsidePress",data:{returnFocus:x?{preventScroll:!0}:O(e)||P(e)}}),o(!1)}function n(){o(!1)}f.current.__escapeKeyBubbles=M,f.current.__outsidePressBubbles=S;const v=k(a);m&&v.addEventListener("keydown",e),T&&v.addEventListener(p,t);let g=[];return h&&(A(s)&&(g=l(s)),A(a)&&(g=g.concat(l(a))),!A(i)&&i&&i.contextElement&&(g=g.concat(l(i.contextElement)))),g=g.filter((e=>{var t;return e!==(null==(t=v.defaultView)?void 0:t.visualViewport)})),g.forEach((e=>{e.addEventListener("scroll",n,{passive:!0})})),()=>{m&&v.removeEventListener("keydown",e),T&&v.removeEventListener(p,t),g.forEach((e=>{e.removeEventListener("scroll",n)}))}}),[f,a,s,i,m,T,p,u,R,c,r,o,h,d,M,S,x]),e.useEffect((()=>{C.current=!1}),[T,p]),e.useMemo((()=>d?{reference:{[Ie[b]]:()=>{g&&(u.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),o(!1))}},floating:{[ke[p]]:()=>{C.current=!0}}}:{}),[d,u,g,p,b,o])},Ce=function(t,n){let{open:r,onOpenChange:o,dataRef:u,events:c,refs:i,elements:{floating:l,domReference:s}}=t,{enabled:a=!0,keyboardOnly:f=!0}=void 0===n?{}:n;const d=e.useRef(""),m=e.useRef(!1),v=e.useRef();return e.useEffect((()=>{if(!a)return;const e=k(l).defaultView||window;function t(){!r&&L(s)&&s===q(k(s))&&(m.current=!0)}return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}}),[l,s,r,a]),e.useEffect((()=>{if(a)return c.on("dismiss",e),()=>{c.off("dismiss",e)};function e(e){"referencePress"!==e.type&&"escapeKey"!==e.type||(m.current=!0)}}),[c,a]),e.useEffect((()=>()=>{clearTimeout(v.current)}),[]),e.useMemo((()=>a?{reference:{onPointerDown(e){let{pointerType:t}=e;d.current=t,m.current=!(!t||!f)},onMouseLeave(){m.current=!1},onFocus(e){var t;m.current||"focus"===e.type&&"mousedown"===(null==(t=u.current.openEvent)?void 0:t.type)&&u.current.openEvent&&xe(u.current.openEvent,s)||(u.current.openEvent=e.nativeEvent,o(!0))},onBlur(e){m.current=!1;const t=e.relatedTarget,n=A(t)&&t.hasAttribute("data-floating-ui-focus-guard")&&"outside"===t.getAttribute("data-type");v.current=setTimeout((()=>{z(i.floating.current,t)||z(s,t)||n||o(!1)}))}}}:{}),[a,f,s,i,u,o])};let Me=!1;function Ae(e,t,n){return Math.floor(e/t)!==n}function Le(e,t){return t<0||t>=e.current.length}function Oe(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:o,amount:u=1}=void 0===t?{}:t;const c=e.current;let i=n;do{var l,s;i+=r?-u:u}while(i>=0&&i<=c.length-1&&(o?o.includes(i):null==c[i]||(null==(l=c[i])?void 0:l.hasAttribute("disabled"))||"true"===(null==(s=c[i])?void 0:s.getAttribute("aria-disabled"))));return i}function Pe(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Se(e,t){return Pe(t,"ArrowUp"===e||"ArrowDown"===e,"ArrowLeft"===e||"ArrowRight"===e)}function De(e,t,n){return Pe(t,"ArrowDown"===e,n?"ArrowLeft"===e:"ArrowRight"===e)||"Enter"===e||" "==e||""===e}function Fe(e,t){return Oe(e,{disabledIndices:t})}function Ke(e,t){return Oe(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}const He=function(t,n){let{open:r,onOpenChange:o,refs:u,elements:{domReference:c}}=t,{listRef:l,activeIndex:s,onNavigate:a=(()=>{}),enabled:f=!0,selectedIndex:m=null,allowEscape:v=!1,loop:p=!1,nested:g=!1,rtl:b=!1,virtual:h=!1,focusItemOnOpen:y="auto",focusItemOnHover:R=!0,openOnArrowKeyDown:x=!0,disabledIndices:I,orientation:T="vertical",cols:C=1,scrollItemIntoView:M=!0}=void 0===n?{listRef:{current:[]},activeIndex:null,onNavigate:()=>{}}:n;const A=w(),F=E(),H=ce(a),N=e.useRef(y),B=e.useRef(null!=m?m:-1),_=e.useRef(null),j=e.useRef(!0),V=e.useRef(H),W=e.useRef(r),U=e.useRef(!1),Y=e.useRef(!1),Z=K(I),G=K(r),Q=K(M),[$,ee]=e.useState(),te=e.useCallback((function(e,t,n){void 0===n&&(n=!1);const r=e.current[t.current];h?ee(null==r?void 0:r.id):X(r,{preventScroll:!0,sync:!(!D()||!S())&&(Me||U.current)}),requestAnimationFrame((()=>{const e=Q.current;e&&r&&(n||!j.current)&&(null==r.scrollIntoView||r.scrollIntoView("boolean"==typeof e?{block:"nearest",inline:"nearest"}:e))}))}),[h,Q]);d((()=>{document.createElement("div").focus({get preventScroll(){return Me=!0,!1}})}),[]),d((()=>{f&&(r?N.current&&null!=m&&(Y.current=!0,H(m)):W.current&&(B.current=-1,V.current(null)))}),[f,r,m,H]),d((()=>{if(f&&r)if(null==s){if(U.current=!1,null!=m)return;W.current&&(B.current=-1,te(l,B)),!W.current&&N.current&&(null!=_.current||!0===N.current&&null==_.current)&&(B.current=null==_.current||De(_.current,T,b)||g?Fe(l,Z.current):Ke(l,Z.current),H(B.current))}else Le(l,s)||(B.current=s,te(l,B,Y.current),Y.current=!1)}),[f,r,s,m,g,l,T,b,H,te,Z]),d((()=>{if(f&&W.current&&!r){var e,t;const n=null==F||null==(e=F.nodesRef.current.find((e=>e.id===A)))||null==(t=e.context)?void 0:t.elements.floating;n&&!z(n,q(k(n)))&&n.focus({preventScroll:!0})}}),[f,r,F,A]),d((()=>{_.current=null,V.current=H,W.current=r}));const ne=null!=s,re=e.useMemo((()=>{function e(e){if(!r)return;const t=l.current.indexOf(e);-1!==t&&H(t)}return{onFocus(t){let{currentTarget:n}=t;e(n)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...R&&{onMouseMove(t){let{currentTarget:n}=t;e(n)},onPointerLeave(){var e;j.current&&(B.current=-1,te(l,B),i((()=>H(null))),h||null==(e=u.floating.current)||e.focus({preventScroll:!0}))}}}}),[r,u,te,R,l,H,h]);return e.useMemo((()=>{if(!f)return{};const e=Z.current;function t(t){if(j.current=!1,U.current=!0,!G.current&&t.currentTarget===u.floating.current)return;if(g&&function(e,t,n){return Pe(t,n?"ArrowRight"===e:"ArrowLeft"===e,"ArrowUp"===e)}(t.key,T,b))return J(t),o(!1),void(L(c)&&c.focus());const n=B.current,i=Fe(l,e),s=Ke(l,e);if("Home"===t.key&&(B.current=i,H(B.current)),"End"===t.key&&(B.current=s,H(B.current)),C>1){const n=B.current;if("ArrowUp"===t.key){if(J(t),-1===n)B.current=s;else if(B.current=Oe(l,{startingIndex:n,amount:C,decrement:!0,disabledIndices:e}),p&&(n-C<i||B.current<0)){const e=n%C,t=s%C,r=s-(t-e);B.current=t===e?s:t>e?r:r-C}Le(l,B.current)&&(B.current=n),H(B.current)}if("ArrowDown"===t.key&&(J(t),-1===n?B.current=i:(B.current=Oe(l,{startingIndex:n,amount:C,disabledIndices:e}),p&&n+C>s&&(B.current=Oe(l,{startingIndex:n%C-C,amount:C,disabledIndices:e}))),Le(l,B.current)&&(B.current=n),H(B.current)),"both"===T){const r=Math.floor(n/C);"ArrowRight"===t.key&&(J(t),n%C!=C-1?(B.current=Oe(l,{startingIndex:n,disabledIndices:e}),p&&Ae(B.current,C,r)&&(B.current=Oe(l,{startingIndex:n-n%C-1,disabledIndices:e}))):p&&(B.current=Oe(l,{startingIndex:n-n%C-1,disabledIndices:e})),Ae(B.current,C,r)&&(B.current=n)),"ArrowLeft"===t.key&&(J(t),n%C!=0?(B.current=Oe(l,{startingIndex:n,disabledIndices:e,decrement:!0}),p&&Ae(B.current,C,r)&&(B.current=Oe(l,{startingIndex:n+(C-n%C),decrement:!0,disabledIndices:e}))):p&&(B.current=Oe(l,{startingIndex:n+(C-n%C),decrement:!0,disabledIndices:e})),Ae(B.current,C,r)&&(B.current=n));const o=Math.floor(s/C)===r;return Le(l,B.current)&&(B.current=p&&o?"ArrowLeft"===t.key?s:Oe(l,{startingIndex:n-n%C-1,disabledIndices:e}):n),void H(B.current)}}if(Se(t.key,T)){if(J(t),r&&!h&&q(t.currentTarget.ownerDocument)===t.currentTarget)return B.current=De(t.key,T,b)?i:s,void H(B.current);De(t.key,T,b)?B.current=p?n>=s?v&&n!==l.current.length?-1:i:Oe(l,{startingIndex:n,disabledIndices:e}):Math.min(s,Oe(l,{startingIndex:n,disabledIndices:e})):B.current=p?n<=i?v&&-1!==n?l.current.length:s:Oe(l,{startingIndex:n,decrement:!0,disabledIndices:e}):Math.max(i,Oe(l,{startingIndex:n,decrement:!0,disabledIndices:e})),Le(l,B.current)?H(null):H(B.current)}}function n(e){"auto"===y&&O(e.nativeEvent)&&(N.current=!0)}const i=h&&r&&ne&&{"aria-activedescendant":$};return{reference:{...i,onKeyDown(n){j.current=!1;const u=0===n.key.indexOf("Arrow");if(h&&r)return t(n);if(!r&&!x&&u)return;(u||"Enter"===n.key||" "===n.key||""===n.key)&&(_.current=n.key),g?function(e,t,n){return Pe(t,n?"ArrowLeft"===e:"ArrowRight"===e,"ArrowDown"===e)}(n.key,T,b)&&(J(n),r?(B.current=Fe(l,e),H(B.current)):o(!0)):Se(n.key,T)&&(null!=m&&(B.current=m),J(n),!r&&x?o(!0):t(n),r&&H(B.current))},onFocus(){r&&H(null)},onPointerDown:function(e){N.current=y,"auto"===y&&P(e.nativeEvent)&&(N.current=!0)},onMouseDown:n,onClick:n},floating:{"aria-orientation":"both"===T?void 0:T,...i,onKeyDown:t,onPointerMove(){j.current=!0}},item:re}}),[c,u,$,Z,G,l,f,T,b,h,r,ne,g,m,x,v,C,p,y,H,o,re])};function Ne(t){return e.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)}))}),t)}const Be=function(t,n){let{open:r}=t,{enabled:o=!0,role:u="dialog"}=void 0===n?{}:n;const c=g(),i=g();return e.useMemo((()=>{const e={id:c,role:u};return o?"tooltip"===u?{reference:{"aria-describedby":r?c:void 0},floating:e}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===u?"dialog":u,"aria-controls":r?c:void 0,..."listbox"===u&&{role:"combobox"},..."menu"===u&&{id:i}},floating:{...e,..."menu"===u&&{"aria-labelledby":i}}}:{}}),[o,u,r,c,i])},_e=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function je(t,n){let{open:r,elements:{floating:o}}=t,{duration:u=250}=void 0===n?{}:n;const c=("number"==typeof u?u:u.close)||0,[i,l]=e.useState(!1),[s,a]=e.useState("unmounted"),f=function(t,n){const[r,o]=e.useState(t);return t&&!r&&o(!0),e.useEffect((()=>{if(!t){const e=setTimeout((()=>o(!1)),n);return()=>clearTimeout(e)}}),[t,n]),r}(r,c);return d((()=>{i&&!f&&a("unmounted")}),[i,f]),d((()=>{if(o){if(r){a("initial");const e=requestAnimationFrame((()=>{a("open")}));return()=>{cancelAnimationFrame(e)}}l(!0),a("close")}}),[r,o]),{isMounted:f,status:s}}function Ve(t,n){let{initial:r={opacity:0},open:o,close:u,common:c,duration:i=250}=void 0===n?{}:n;const l=t.placement,s=l.split("-")[0],[a,f]=e.useState({}),{isMounted:m,status:v}=je(t,{duration:i}),p=K(r),g=K(o),b=K(u),h=K(c),y="number"==typeof i,w=(y?i:i.open)||0,E=(y?i:i.close)||0;return d((()=>{const e={side:s,placement:l},t=p.current,n=b.current,r=g.current,o=h.current,u="function"==typeof t?t(e):t,c="function"==typeof n?n(e):n,i="function"==typeof o?o(e):o,a=("function"==typeof r?r(e):r)||Object.keys(u).reduce(((e,t)=>(e[t]="",e)),{});if("initial"!==v&&"unmounted"!==v||f((e=>({transitionProperty:e.transitionProperty,...i,...u}))),"open"===v&&f({transitionProperty:Object.keys(a).map(_e).join(","),transitionDuration:w+"ms",...i,...a}),"close"===v){const e=c||u;f({transitionProperty:Object.keys(e).map(_e).join(","),transitionDuration:E+"ms",...i,...e})}}),[s,l,E,b,p,g,h,w,v]),{isMounted:m,styles:a}}const We=function(t,n){var r;let{open:o,dataRef:u,refs:c}=t,{listRef:i,activeIndex:l,onMatch:s=(()=>{}),enabled:a=!0,findMatch:f=null,resetMs:m=1e3,ignoreKeys:v=[],selectedIndex:p=null}=void 0===n?{listRef:{current:[]},activeIndex:null}:n;const g=e.useRef(),b=e.useRef(""),h=e.useRef(null!=(r=null!=p?p:l)?r:-1),y=e.useRef(null),w=ce(s),E=K(f),R=K(v);return d((()=>{o&&(clearTimeout(g.current),y.current=null,b.current="")}),[o]),d((()=>{var e;o&&""===b.current&&(h.current=null!=(e=null!=p?p:l)?e:-1)}),[o,p,l]),e.useMemo((()=>{if(!a)return{};function e(e){var t;const n=Z(e.nativeEvent);if(A(n)&&(q(k(n))!==e.currentTarget?null!=(t=c.floating.current)&&t.contains(n)&&n.closest('[role="dialog"],[role="menu"],[role="listbox"],[role="tree"],[role="grid"]')!==e.currentTarget:!e.currentTarget.contains(n)))return;b.current.length>0&&" "!==b.current[0]&&(u.current.typing=!0," "===e.key&&J(e));const r=i.current;if(null==r||R.current.includes(e.key)||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey)return;r.every((e=>{var t,n;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(n=e[1])?void 0:n.toLocaleLowerCase())}))&&b.current===e.key&&(b.current="",h.current=y.current),b.current+=e.key,clearTimeout(g.current),g.current=setTimeout((()=>{b.current="",h.current=y.current,u.current.typing=!1}),m);const o=h.current,l=[...r.slice((o||0)+1),...r.slice(0,(o||0)+1)],s=E.current?E.current(l,b.current):l.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(b.current.toLocaleLowerCase())))),a=s?r.indexOf(s):-1;-1!==a&&(w(a),y.current=a)}return{reference:{onKeyDown:e},floating:{onKeyDown:e}}}),[a,u,i,m,R,E,w,c])};function qe(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const ze=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:o,offset:u=0,index:c=0,minItemsVisible:l=4,referenceOverflowThreshold:f=0,scrollRef:d,...m}=e,{rects:v,elements:{floating:p}}=t,g=n.current[c];if(!g)return{};const b={...t,...await s(-g.offsetTop-v.reference.height/2-g.offsetHeight/2-u).fn(t)},h=(null==d?void 0:d.current)||p,y=await a(qe(b,h.scrollHeight),m),w=await a(b,{...m,elementContext:"reference"}),E=Math.max(0,y.top),R=b.y+E,x=Math.max(0,h.scrollHeight-E-Math.max(0,y.bottom));return h.style.maxHeight=x+"px",h.scrollTop=E,o&&(h.offsetHeight<g.offsetHeight*Math.min(l,n.current.length-1)-1||w.top>=-f||w.bottom>=-f?i((()=>o(!0))):i((()=>o(!1)))),r&&(r.current=await a(qe({...b,y:R},h.offsetHeight),m)),{y:R}}}),Ue=(t,n)=>{let{open:r,elements:o}=t,{enabled:u=!0,overflowRef:c,scrollRef:l,onChange:s}=n;const a=ce(s),f=e.useRef(!1),d=e.useRef(null),m=e.useRef(null);return e.useEffect((()=>{if(!u)return;function e(e){if(e.ctrlKey||!t||null==c.current)return;const n=e.deltaY,r=c.current.top>=-.5,o=c.current.bottom>=-.5,u=t.scrollHeight-t.clientHeight,l=n<0?-1:1,s=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!r&&n>0||!o&&n<0?(e.preventDefault(),i((()=>{a((e=>e+Math[s](n,u*l)))}))):/firefox/i.test(C())&&(t.scrollTop+=n))}const t=(null==l?void 0:l.current)||o.floating;return r&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{d.current=t.scrollTop,null!=c.current&&(m.current={...c.current})})),()=>{d.current=null,m.current=null,t.removeEventListener("wheel",e)}):void 0}),[u,r,o.floating,c,l,a]),e.useMemo((()=>u?{floating:{onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const e=(null==l?void 0:l.current)||o.floating;if(c.current&&e&&f.current){if(null!==d.current){const t=e.scrollTop-d.current;(c.current.bottom<-.5&&t<-1||c.current.top<-.5&&t>1)&&i((()=>a((e=>e+t))))}requestAnimationFrame((()=>{d.current=e.scrollTop}))}}}}:{}),[u,c,o.floating,l,a])};function Xe(e){let t,{restMs:n=0,buffer:r=.5,blockPointerEvents:o=!1}=void 0===e?{}:e,u=!1,c=!1;const i=e=>{let{x:o,y:i,placement:l,elements:s,onClose:a,nodeId:f,tree:d}=e;return function(e){function m(){clearTimeout(t),a()}if(clearTimeout(t),!s.domReference||!s.floating||null==l||null==o||null==i)return;const{clientX:v,clientY:p}=e,g=[v,p],b=Z(e),h="mouseleave"===e.type,y=z(s.floating,b),w=z(s.domReference,b),E=s.domReference.getBoundingClientRect(),R=s.floating.getBoundingClientRect(),x=l.split("-")[0],I=o>R.right-R.width/2,k=i>R.bottom-R.height/2,T=function(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}(g,E);if(y&&(c=!0,!h))return;if(w&&(c=!1),w&&!h)return void(c=!0);if(h&&A(e.relatedTarget)&&z(s.floating,e.relatedTarget))return;if(d&&Y(d.nodesRef.current,f).some((e=>{let{context:t}=e;return null==t?void 0:t.open})))return;if("top"===x&&i>=E.bottom-1||"bottom"===x&&i<=E.top+1||"left"===x&&o>=E.right-1||"right"===x&&o<=E.left+1)return m();let C=[];switch(x){case"top":C=[[R.left,E.top+1],[R.left,R.bottom-1],[R.right,R.bottom-1],[R.right,E.top+1]],u=v>=R.left&&v<=R.right&&p>=R.top&&p<=E.top+1;break;case"bottom":C=[[R.left,R.top+1],[R.left,E.bottom-1],[R.right,E.bottom-1],[R.right,R.top+1]],u=v>=R.left&&v<=R.right&&p>=E.bottom-1&&p<=R.bottom;break;case"left":C=[[R.right-1,R.bottom],[R.right-1,R.top],[E.left+1,R.top],[E.left+1,R.bottom]],u=v>=R.left&&v<=E.left+1&&p>=R.top&&p<=R.bottom;break;case"right":C=[[E.right-1,R.bottom],[E.right-1,R.top],[R.left+1,R.top],[R.left+1,R.bottom]],u=v>=E.right-1&&v<=R.right&&p>=R.top&&p<=R.bottom}const M=u?C:function(e){let[t,n]=e;const o=R.width>E.width,u=R.height>E.height;switch(x){case"top":return[[o?t+r/2:I?t+4*r:t-4*r,n+r+1],[o?t-r/2:I?t+4*r:t-4*r,n+r+1],...[[R.left,I||o?R.bottom-r:R.top],[R.right,I?o?R.bottom-r:R.top:R.bottom-r]]];case"bottom":return[[o?t+r/2:I?t+4*r:t-4*r,n-r],[o?t-r/2:I?t+4*r:t-4*r,n-r],...[[R.left,I||o?R.top+r:R.bottom],[R.right,I?o?R.top+r:R.bottom:R.top+r]]];case"left":{const e=[t+r+1,u?n+r/2:k?n+4*r:n-4*r],o=[t+r+1,u?n-r/2:k?n+4*r:n-4*r];return[...[[k||u?R.right-r:R.left,R.top],[k?u?R.right-r:R.left:R.right-r,R.bottom]],e,o]}case"right":return[[t-r,u?n+r/2:k?n+4*r:n-4*r],[t-r,u?n-r/2:k?n+4*r:n-4*r],...[[k||u?R.left+r:R.right,R.top],[k?u?R.left+r:R.right:R.left+r,R.bottom]]]}}([o,i]);return u?void 0:c&&!T?m():void(!function(e,t){const[n,r]=e;let o=!1;const u=t.length;for(let e=0,c=u-1;e<u;c=e++){const[u,i]=t[e]||[0,0],[l,s]=t[c]||[0,0];i>=r!=s>=r&&n<=(l-u)*(r-i)/(s-i)+u&&(o=!o)}return o}([v,p],M)?m():n&&!c&&(t=setTimeout(m,n)))}};return i.__options={blockPointerEvents:o},i}function Ye(t){void 0===t&&(t={});const{open:n=!1,onOpenChange:r,nodeId:o}=t,u=f(t),c=E(),i=e.useRef(null),l=e.useRef({}),s=e.useState((()=>b()))[0],[a,m]=e.useState(null),v=e.useCallback((e=>{const t=A(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u.refs.setReference(t)}),[u.refs]),p=e.useCallback((e=>{(A(e)||null===e)&&(i.current=e,m(e)),(A(u.refs.reference.current)||null===u.refs.reference.current||null!==e&&!A(e))&&u.refs.setReference(e)}),[u.refs]),g=e.useMemo((()=>({...u.refs,setReference:p,setPositionReference:v,domReference:i})),[u.refs,p,v]),h=e.useMemo((()=>({...u.elements,domReference:a})),[u.elements,a]),y=ce(r),w=e.useMemo((()=>({...u,refs:g,elements:h,dataRef:l,nodeId:o,events:s,open:n,onOpenChange:y})),[u,o,s,n,y,g,h]);return d((()=>{const e=null==c?void 0:c.nodesRef.current.find((e=>e.id===o));e&&(e.context=w)})),e.useMemo((()=>({...u,context:w,refs:g,reference:p,positionReference:v})),[u,g,w,p,v])}function Ze(e,t,n){const r=new Map;return{..."floating"===n&&{tabIndex:-1},...e,...t.map((e=>e?e[n]:null)).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,o]=t;var u;0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof o&&(null==(u=r.get(n))||u.push(o),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];null==(e=r.get(n))||e.forEach((e=>e(...o)))})):e[n]=o})),e):e),{})}}const Ge=function(t){void 0===t&&(t=[]);const n=t,r=e.useCallback((e=>Ze(e,t,"reference")),n),o=e.useCallback((e=>Ze(e,t,"floating")),n),u=e.useCallback((e=>Ze(e,t,"item")),t.map((e=>null==e?void 0:e.item)));return e.useMemo((()=>({getReferenceProps:r,getFloatingProps:o,getItemProps:u})),[r,o,u])};export{j as FloatingDelayGroup,be as FloatingFocusManager,x as FloatingNode,ye as FloatingOverlay,ve as FloatingPortal,I as FloatingTree,ze as inner,Xe as safePolygon,Re as useClick,V as useDelayGroup,_ as useDelayGroupContext,Te as useDismiss,Ye as useFloating,R as useFloatingNodeId,w as useFloatingParentNodeId,me as useFloatingPortalNode,E as useFloatingTree,Ce as useFocus,N as useHover,g as useId,Ue as useInnerOffset,Ge as useInteractions,He as useListNavigation,Ne as useMergeRefs,Be as useRole,je as useTransitionStatus,Ve as useTransitionStyles,We as useTypeahead};
